{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ay982\\\\OneDrive\\\\Desktop\\\\Assignment\\\\client\\\\src\\\\components\\\\auth\\\\Register.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Card, Form, Button, Alert } from 'react-bootstrap';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport { toast } from 'react-toastify';\nimport LoadingSpinner from '../common/LoadingSpinner';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Register = function () {\n  _s();\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    address: '',\n    password: '',\n    confirmPassword: '',\n    role: 'user'\n  });\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n  const authContext = useAuth();\n  const register = authContext.register;\n  const user = authContext.user;\n  const navigate = useNavigate();\n\n  // Check if user is already logged in\n  useEffect(function () {\n    if (user) {\n      let dashboardPath = '/user/stores';\n      if (user.role === 'admin') {\n        dashboardPath = '/admin/dashboard';\n      } else if (user.role === 'store_owner') {\n        dashboardPath = '/store-owner/dashboard';\n      }\n      navigate(dashboardPath, {\n        replace: true\n      });\n    }\n  }, [user, navigate]);\n  const handleChange = function (e) {\n    const fieldName = e.target.name;\n    const fieldValue = e.target.value;\n    const newFormData = {\n      ...formData\n    };\n    newFormData[fieldName] = fieldValue;\n    setFormData(newFormData);\n\n    // Clear error when user types\n    if (errors[fieldName]) {\n      const newErrors = {\n        ...errors\n      };\n      newErrors[fieldName] = '';\n      setErrors(newErrors);\n    }\n  };\n  const validateForm = function () {\n    const newErrors = {};\n\n    // Check name\n    if (!formData.name) {\n      newErrors.name = 'Name is required';\n    } else if (formData.name.length < 3) {\n      newErrors.name = 'Name must be at least 3 characters';\n    } else if (formData.name.length > 60) {\n      newErrors.name = 'Name cannot exceed 60 characters';\n    }\n\n    // Check email\n    const emailPattern = /\\S+@\\S+\\.\\S+/;\n    if (!formData.email) {\n      newErrors.email = 'Email is required';\n    } else if (!emailPattern.test(formData.email)) {\n      newErrors.email = 'Please enter a valid email address';\n    }\n\n    // Check address\n    if (!formData.address) {\n      newErrors.address = 'Address is required';\n    } else if (formData.address.length > 400) {\n      newErrors.address = 'Address cannot exceed 400 characters';\n    }\n\n    // Check password\n    if (!formData.password) {\n      newErrors.password = 'Password is required';\n    } else if (formData.password.length < 8) {\n      newErrors.password = 'Password must be at least 8 characters';\n    } else if (formData.password.length > 16) {\n      newErrors.password = 'Password cannot exceed 16 characters';\n    } else {\n      const passwordPattern = /(?=.*[A-Z])(?=.*[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?])/;\n      if (!passwordPattern.test(formData.password)) {\n        newErrors.password = 'Password must contain at least one uppercase letter and one special character';\n      }\n    }\n\n    // Check confirm password\n    if (!formData.confirmPassword) {\n      newErrors.confirmPassword = 'Please confirm your password';\n    } else if (formData.password !== formData.confirmPassword) {\n      newErrors.confirmPassword = 'Passwords do not match';\n    }\n    setErrors(newErrors);\n    const errorKeys = Object.keys(newErrors);\n    if (errorKeys.length === 0) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n  const handleSubmit = async function (e) {\n    e.preventDefault();\n    const isValid = validateForm();\n    if (!isValid) {\n      return;\n    }\n    setLoading(true);\n    try {\n      const registrationData = {\n        name: formData.name,\n        email: formData.email,\n        address: formData.address,\n        password: formData.password,\n        role: formData.role\n      };\n      const result = await register(registrationData);\n      if (result.success) {\n        toast.success('Registration successful!');\n        let dashboardPath = '/user/stores';\n        if (formData.role === 'admin') {\n          dashboardPath = '/admin/dashboard';\n        } else if (formData.role === 'store_owner') {\n          dashboardPath = '/store-owner/dashboard';\n        }\n        navigate(dashboardPath, {\n          replace: true\n        });\n      } else {\n        if (result.errors && result.errors.length > 0) {\n          const fieldErrors = {};\n          const errorArray = result.errors;\n          for (let i = 0; i < errorArray.length; i++) {\n            const error = errorArray[i];\n            const fieldName = error.path;\n            const errorMsg = error.msg;\n            fieldErrors[fieldName] = errorMsg;\n          }\n          setErrors(fieldErrors);\n        }\n        let errorMessage = 'Registration failed';\n        if (result.message) {\n          errorMessage = result.message;\n        }\n        toast.error(errorMessage);\n      }\n    } catch (error) {\n      toast.error('An error occurred during registration');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getPasswordStrength = function () {\n    const password = formData.password;\n    let strength = 0;\n    let feedback = [];\n\n    // Check length minimum\n    if (password.length >= 8) {\n      strength = strength + 1;\n    } else {\n      feedback.push('At least 8 characters');\n    }\n\n    // Check length maximum\n    if (password.length <= 16) {\n      strength = strength + 1;\n    } else {\n      feedback.push('Maximum 16 characters');\n    }\n\n    // Check uppercase\n    const hasUppercase = /[A-Z]/.test(password);\n    if (hasUppercase) {\n      strength = strength + 1;\n    } else {\n      feedback.push('One uppercase letter');\n    }\n\n    // Check special character\n    const hasSpecial = /[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/.test(password);\n    if (hasSpecial) {\n      strength = strength + 1;\n    } else {\n      feedback.push('One special character');\n    }\n    return {\n      strength: strength,\n      feedback: feedback\n    };\n  };\n  const passwordStrength = getPasswordStrength();\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"py-5\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: 8,\n        lg: 6,\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"shadow\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            className: \"text-center bg-primary text-white\",\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"mb-0\",\n              children: \"Create Account\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            className: \"p-4\",\n            children: [/*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: handleSubmit,\n              children: [/*#__PURE__*/_jsxDEV(Row, {\n                children: /*#__PURE__*/_jsxDEV(Col, {\n                  md: 12,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"Full Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 228,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: \"text\",\n                      name: \"name\",\n                      value: formData.name,\n                      onChange: handleChange,\n                      isInvalid: !!errors.name,\n                      placeholder: \"Enter your full name (3-60 characters)\",\n                      disabled: loading\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 229,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n                      type: \"invalid\",\n                      children: errors.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n                      className: \"text-muted\",\n                      children: [formData.name.length, \"/60 characters\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 241,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"Email Address\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 251,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: \"email\",\n                      name: \"email\",\n                      value: formData.email,\n                      onChange: handleChange,\n                      isInvalid: !!errors.email,\n                      placeholder: \"Enter your email\",\n                      disabled: loading\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 252,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n                      type: \"invalid\",\n                      children: errors.email\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 261,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"Password\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 268,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: \"password\",\n                      name: \"password\",\n                      value: formData.password,\n                      onChange: handleChange,\n                      isInvalid: !!errors.password,\n                      placeholder: \"Enter your password\",\n                      disabled: loading\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 269,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n                      type: \"invalid\",\n                      children: errors.password\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 278,\n                      columnNumber: 23\n                    }, this), formData.password && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"mt-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"progress\",\n                        style: {\n                          height: '5px'\n                        },\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: 'progress-bar ' + (passwordStrength.strength <= 1 ? 'bg-danger' : passwordStrength.strength <= 2 ? 'bg-warning' : passwordStrength.strength <= 3 ? 'bg-info' : 'bg-success'),\n                          style: {\n                            width: passwordStrength.strength / 4 * 100 + '%'\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 284,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 283,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                        className: \"text-muted\",\n                        children: passwordStrength.feedback.length > 0 && 'Missing: ' + passwordStrength.feedback.join(', ')\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 294,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 282,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 267,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"Confirm Password\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 308,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: \"password\",\n                      name: \"confirmPassword\",\n                      value: formData.confirmPassword,\n                      onChange: handleChange,\n                      isInvalid: !!errors.confirmPassword,\n                      placeholder: \"Confirm your password\",\n                      disabled: loading\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 309,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n                      type: \"invalid\",\n                      children: errors.confirmPassword\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 318,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 307,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 306,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  md: 6,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"Address\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 325,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                      type: \"text\",\n                      name: \"address\",\n                      value: formData.address,\n                      onChange: handleChange,\n                      isInvalid: !!errors.address,\n                      placeholder: \"Enter your address\",\n                      disabled: loading\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 326,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Control.Feedback, {\n                      type: \"invalid\",\n                      children: errors.address\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 335,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n                      className: \"text-muted\",\n                      children: [formData.address.length, \"/400 characters\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 338,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 324,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: /*#__PURE__*/_jsxDEV(Col, {\n                  md: 12,\n                  children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                    className: \"mb-3\",\n                    children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                      children: \"Account Type\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 348,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Select, {\n                      name: \"role\",\n                      value: formData.role,\n                      onChange: handleChange,\n                      disabled: loading,\n                      className: \"mb-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"user\",\n                        children: \"Normal User - Browse and rate stores\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 356,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"store_owner\",\n                        children: \"Store Owner - Manage store ratings\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 357,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"admin\",\n                        children: \"Admin - Manage users and stores\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 358,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 349,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(Form.Text, {\n                      className: \"text-muted\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Normal User:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 361,\n                        columnNumber: 25\n                      }, this), \" Browse stores and submit ratings\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 361,\n                        columnNumber: 87\n                      }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Store Owner:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 362,\n                        columnNumber: 25\n                      }, this), \" View ratings and analytics for your store\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 362,\n                        columnNumber: 96\n                      }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Admin:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 363,\n                        columnNumber: 25\n                      }, this), \" Manage all users and stores on the platform\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 360,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"primary\",\n                type: \"submit\",\n                className: \"w-100 mb-3\",\n                disabled: loading,\n                size: \"lg\",\n                children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"spinner-border spinner-border-sm me-2\",\n                    role: \"status\",\n                    \"aria-hidden\": \"true\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 23\n                  }, this), \"Creating Account...\"]\n                }, void 0, true) : 'Create Account'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-center\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"mb-0\",\n                children: [\"Already have an account?\", ' ', /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/login\",\n                  className: \"text-decoration-none\",\n                  children: \"Login here\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 388,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 387,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 216,\n    columnNumber: 5\n  }, this);\n};\n_s(Register, \"3YJdFkF63N/sR6w158z0Pz5ziFY=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Card","Form","Button","Alert","Link","useNavigate","useAuth","toast","LoadingSpinner","jsxDEV","_jsxDEV","Fragment","_Fragment","Register","_s","formData","setFormData","name","email","address","password","confirmPassword","role","loading","setLoading","errors","setErrors","authContext","register","user","navigate","dashboardPath","replace","handleChange","e","fieldName","target","fieldValue","value","newFormData","newErrors","validateForm","length","emailPattern","test","passwordPattern","errorKeys","Object","keys","handleSubmit","preventDefault","isValid","registrationData","result","success","fieldErrors","errorArray","i","error","path","errorMsg","msg","errorMessage","message","getPasswordStrength","strength","feedback","push","hasUppercase","hasSpecial","passwordStrength","className","children","md","lg","Header","fileName","_jsxFileName","lineNumber","columnNumber","Body","onSubmit","Group","Label","Control","type","onChange","isInvalid","placeholder","disabled","Feedback","Text","style","height","width","join","Select","variant","size","to","_c","$RefreshReg$"],"sources":["C:/Users/ay982/OneDrive/Desktop/Assignment/client/src/components/auth/Register.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Card, Form, Button, Alert } from 'react-bootstrap';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport { toast } from 'react-toastify';\nimport LoadingSpinner from '../common/LoadingSpinner';\n\nconst Register = function() {\n  const [formData, setFormData] = useState({\n    name: '',\n    email: '',\n    address: '',\n    password: '',\n    confirmPassword: '',\n    role: 'user'\n  });\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({});\n\n  const authContext = useAuth();\n  const register = authContext.register;\n  const user = authContext.user;\n  \n  const navigate = useNavigate();\n\n  // Check if user is already logged in\n  useEffect(function() {\n    if (user) {\n      let dashboardPath = '/user/stores';\n      \n      if (user.role === 'admin') {\n        dashboardPath = '/admin/dashboard';\n      } else if (user.role === 'store_owner') {\n        dashboardPath = '/store-owner/dashboard';\n      }\n      \n      navigate(dashboardPath, { replace: true });\n    }\n  }, [user, navigate]);\n\n  const handleChange = function(e) {\n    const fieldName = e.target.name;\n    const fieldValue = e.target.value;\n    \n    const newFormData = {...formData};\n    newFormData[fieldName] = fieldValue;\n    setFormData(newFormData);\n    \n    // Clear error when user types\n    if (errors[fieldName]) {\n      const newErrors = {...errors};\n      newErrors[fieldName] = '';\n      setErrors(newErrors);\n    }\n  };\n\n  const validateForm = function() {\n    const newErrors = {};\n\n    // Check name\n    if (!formData.name) {\n      newErrors.name = 'Name is required';\n    } else if (formData.name.length < 3) {\n      newErrors.name = 'Name must be at least 3 characters';\n    } else if (formData.name.length > 60) {\n      newErrors.name = 'Name cannot exceed 60 characters';\n    }\n\n    // Check email\n    const emailPattern = /\\S+@\\S+\\.\\S+/;\n    if (!formData.email) {\n      newErrors.email = 'Email is required';\n    } else if (!emailPattern.test(formData.email)) {\n      newErrors.email = 'Please enter a valid email address';\n    }\n\n    // Check address\n    if (!formData.address) {\n      newErrors.address = 'Address is required';\n    } else if (formData.address.length > 400) {\n      newErrors.address = 'Address cannot exceed 400 characters';\n    }\n\n    // Check password\n    if (!formData.password) {\n      newErrors.password = 'Password is required';\n    } else if (formData.password.length < 8) {\n      newErrors.password = 'Password must be at least 8 characters';\n    } else if (formData.password.length > 16) {\n      newErrors.password = 'Password cannot exceed 16 characters';\n    } else {\n      const passwordPattern = /(?=.*[A-Z])(?=.*[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?])/;\n      if (!passwordPattern.test(formData.password)) {\n        newErrors.password = 'Password must contain at least one uppercase letter and one special character';\n      }\n    }\n\n    // Check confirm password\n    if (!formData.confirmPassword) {\n      newErrors.confirmPassword = 'Please confirm your password';\n    } else if (formData.password !== formData.confirmPassword) {\n      newErrors.confirmPassword = 'Passwords do not match';\n    }\n\n    setErrors(newErrors);\n    \n    const errorKeys = Object.keys(newErrors);\n    if (errorKeys.length === 0) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  const handleSubmit = async function(e) {\n    e.preventDefault();\n\n    const isValid = validateForm();\n    if (!isValid) {\n      return;\n    }\n\n    setLoading(true);\n    \n    try {\n      const registrationData = {\n        name: formData.name,\n        email: formData.email,\n        address: formData.address,\n        password: formData.password,\n        role: formData.role\n      };\n      \n      const result = await register(registrationData);\n      \n      if (result.success) {\n        toast.success('Registration successful!');\n        \n        let dashboardPath = '/user/stores';\n        if (formData.role === 'admin') {\n          dashboardPath = '/admin/dashboard';\n        } else if (formData.role === 'store_owner') {\n          dashboardPath = '/store-owner/dashboard';\n        }\n        \n        navigate(dashboardPath, { replace: true });\n      } else {\n        if (result.errors && result.errors.length > 0) {\n          const fieldErrors = {};\n          const errorArray = result.errors;\n          \n          for (let i = 0; i < errorArray.length; i++) {\n            const error = errorArray[i];\n            const fieldName = error.path;\n            const errorMsg = error.msg;\n            fieldErrors[fieldName] = errorMsg;\n          }\n          \n          setErrors(fieldErrors);\n        }\n        \n        let errorMessage = 'Registration failed';\n        if (result.message) {\n          errorMessage = result.message;\n        }\n        toast.error(errorMessage);\n      }\n    } catch (error) {\n      toast.error('An error occurred during registration');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getPasswordStrength = function() {\n    const password = formData.password;\n    let strength = 0;\n    let feedback = [];\n\n    // Check length minimum\n    if (password.length >= 8) {\n      strength = strength + 1;\n    } else {\n      feedback.push('At least 8 characters');\n    }\n\n    // Check length maximum\n    if (password.length <= 16) {\n      strength = strength + 1;\n    } else {\n      feedback.push('Maximum 16 characters');\n    }\n\n    // Check uppercase\n    const hasUppercase = /[A-Z]/.test(password);\n    if (hasUppercase) {\n      strength = strength + 1;\n    } else {\n      feedback.push('One uppercase letter');\n    }\n\n    // Check special character\n    const hasSpecial = /[!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?]/.test(password);\n    if (hasSpecial) {\n      strength = strength + 1;\n    } else {\n      feedback.push('One special character');\n    }\n\n    return { strength: strength, feedback: feedback };\n  };\n\n  const passwordStrength = getPasswordStrength();\n\n  return (\n    <Container className=\"py-5\">\n      <Row className=\"justify-content-center\">\n        <Col md={8} lg={6}>\n          <Card className=\"shadow\">\n            <Card.Header className=\"text-center bg-primary text-white\">\n              <h4 className=\"mb-0\">Create Account</h4>\n            </Card.Header>\n            <Card.Body className=\"p-4\">\n              <Form onSubmit={handleSubmit}>\n                <Row>\n                  <Col md={12}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Full Name</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"name\"\n                        value={formData.name}\n                        onChange={handleChange}\n                        isInvalid={!!errors.name}\n                        placeholder=\"Enter your full name (3-60 characters)\"\n                        disabled={loading}\n                      />\n                      <Form.Control.Feedback type=\"invalid\">\n                        {errors.name}\n                      </Form.Control.Feedback>\n                      <Form.Text className=\"text-muted\">\n                        {formData.name.length}/60 characters\n                      </Form.Text>\n                    </Form.Group>\n                  </Col>\n                </Row>\n\n                <Row>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Email Address</Form.Label>\n                      <Form.Control\n                        type=\"email\"\n                        name=\"email\"\n                        value={formData.email}\n                        onChange={handleChange}\n                        isInvalid={!!errors.email}\n                        placeholder=\"Enter your email\"\n                        disabled={loading}\n                      />\n                      <Form.Control.Feedback type=\"invalid\">\n                        {errors.email}\n                      </Form.Control.Feedback>\n                    </Form.Group>\n                  </Col>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Password</Form.Label>\n                      <Form.Control\n                        type=\"password\"\n                        name=\"password\"\n                        value={formData.password}\n                        onChange={handleChange}\n                        isInvalid={!!errors.password}\n                        placeholder=\"Enter your password\"\n                        disabled={loading}\n                      />\n                      <Form.Control.Feedback type=\"invalid\">\n                        {errors.password}\n                      </Form.Control.Feedback>\n                      {formData.password && (\n                        <div className=\"mt-2\">\n                          <div className=\"progress\" style={{ height: '5px' }}>\n                            <div \n                              className={\n                                'progress-bar ' + \n                                (passwordStrength.strength <= 1 ? 'bg-danger' :\n                                passwordStrength.strength <= 2 ? 'bg-warning' :\n                                passwordStrength.strength <= 3 ? 'bg-info' : 'bg-success')\n                              }\n                              style={{ width: (passwordStrength.strength / 4) * 100 + '%' }}\n                            ></div>\n                          </div>\n                          <small className=\"text-muted\">\n                            {passwordStrength.feedback.length > 0 && \n                              'Missing: ' + passwordStrength.feedback.join(', ')\n                            }\n                          </small>\n                        </div>\n                      )}\n                    </Form.Group>\n                  </Col>\n                </Row>\n\n                <Row>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Confirm Password</Form.Label>\n                      <Form.Control\n                        type=\"password\"\n                        name=\"confirmPassword\"\n                        value={formData.confirmPassword}\n                        onChange={handleChange}\n                        isInvalid={!!errors.confirmPassword}\n                        placeholder=\"Confirm your password\"\n                        disabled={loading}\n                      />\n                      <Form.Control.Feedback type=\"invalid\">\n                        {errors.confirmPassword}\n                      </Form.Control.Feedback>\n                    </Form.Group>\n                  </Col>\n                  <Col md={6}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Address</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"address\"\n                        value={formData.address}\n                        onChange={handleChange}\n                        isInvalid={!!errors.address}\n                        placeholder=\"Enter your address\"\n                        disabled={loading}\n                      />\n                      <Form.Control.Feedback type=\"invalid\">\n                        {errors.address}\n                      </Form.Control.Feedback>\n                      <Form.Text className=\"text-muted\">\n                        {formData.address.length}/400 characters\n                      </Form.Text>\n                    </Form.Group>\n                  </Col>\n                </Row>\n\n                <Row>\n                  <Col md={12}>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Account Type</Form.Label>\n                      <Form.Select\n                        name=\"role\"\n                        value={formData.role}\n                        onChange={handleChange}\n                        disabled={loading}\n                        className=\"mb-2\"\n                      >\n                        <option value=\"user\">Normal User - Browse and rate stores</option>\n                        <option value=\"store_owner\">Store Owner - Manage store ratings</option>\n                        <option value=\"admin\">Admin - Manage users and stores</option>\n                      </Form.Select>\n                      <Form.Text className=\"text-muted\">\n                        <strong>Normal User:</strong> Browse stores and submit ratings<br/>\n                        <strong>Store Owner:</strong> View ratings and analytics for your store<br/>\n                        <strong>Admin:</strong> Manage all users and stores on the platform\n                      </Form.Text>\n                    </Form.Group>\n                  </Col>\n                </Row>\n\n                <Button\n                  variant=\"primary\"\n                  type=\"submit\"\n                  className=\"w-100 mb-3\"\n                  disabled={loading}\n                  size=\"lg\"\n                >\n                  {loading ? (\n                    <>\n                      <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" aria-hidden=\"true\"></span>\n                      Creating Account...\n                    </>\n                  ) : (\n                    'Create Account'\n                  )}\n                </Button>\n              </Form>\n\n              <div className=\"text-center\">\n                <p className=\"mb-0\">\n                  Already have an account?{' '}\n                  <Link to=\"/login\" className=\"text-decoration-none\">\n                    Login here\n                  </Link>\n                </p>\n              </div>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}